# 修复免费试看逻辑问题

## 1. 修改视频播放页路由配置
- 将 `requiresAuth` 改为 `requiresAuthForFull`
- 表示只有观看完整内容才需要登录

## 2. 修改路由守卫逻辑
- 区分免费试看和完整观看的权限检查
- 免费试看不需要登录
- 完整观看需要登录

## 3. 修改 CourseDetail.vue 的 playChapter 函数
- 免费试看：直接跳转到播放页（不需要登录）
- 完整观看：未登录时跳转到登录页，已登录但未购买时弹出购买弹窗

## 4. 修改 VideoPlay.vue
- 在试看结束后检查是否需要购买
- 试看结束时弹出购买提示

## 预期效果
- 未登录用户可以点击"免费试看"观看视频
- 未登录用户点击"立即播放"会跳转到登录页
- 登录后未购买的用户点击"立即播放"会弹出购买弹窗
- 试看时间结束后弹出购买提示